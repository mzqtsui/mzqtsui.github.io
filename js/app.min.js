(function(){
  "use strict";
  var app = angular.module('MainApp', ['ngMaterial']);


  app.controller('AppCtrl', ['$scope', '$mdDialog', '$mdMedia',
    function($scope, $mdDialog, $mdMedia) {

    $scope.projects = [
      {
        name: 'Climbing Map',
        titleBold: 'Climbing',
        titleThin: 'Map',
        skills: 'HTML5 . SCSS . Knockout . Google Maps API . Uber Rides API',
        summary: 'Climbing Gyms in SF Area',
        img: 'img/neighbourhood_map.jpg',
        date: '2016',
        dialog: 'projects/project_dialog.tmpl.html',
        desc: 'A single-page web application using Knockout. The searchable webapp displays a Google Map of a few climbing gyms in the SF Bay Area. Users can click the listview or markers to see more information (including Uber pricing) on the selected gym.',
        links: [
          {
            caption: 'Repo',
            fa: 'fa-github',
            href: 'https://github.com/mzqtsui/frontend-nanodegree-map'
          },
          {
            caption: 'Demo',
            fa: 'fa-globe',
            href: 'https://mzqtsui.github.io/frontend-nanodegree-map/dist'
          }
        ]
      },
      {
        name: 'Time Bank',
        summary: 'UX Design Project',
        img: 'img/time.jpg',
        date: '2016',
        dialog: 'projects/timebank_dialog.tmpl.html'
      },
      {
        name: 'Bugs & Baubles',
        summary: 'Frogger Clone',
        img: 'img/bug_game.jpg',
        date: '2016',
        dialog: 'projects/frogger_dialog.tmpl.html'
      },
      {
        name: 'Material Red',
        summary: 'An experiment in SVG',
        img: 'img/material_red.jpg',
        date: '2016',
        dialog: 'projects/material_red_dialog.tmpl.html'
      },
      {
        name: 'Upscale Markets',
        summary: 'Grocery Shopping Prototype',
        img: 'img/upscale.jpg',
        date: '2016',
        dialog: 'projects/upscale_markets_dialog.tmpl.html'
      },
      {
        name: 'Palette Website',
        summary: 'Redesign, Development, Illustration',
        img: 'img/palette.jpg',
        date: '2015',
        dialog: 'projects/palette_site_dialog.tmpl.html'
      },
      {
        name: 'PaletteApp2',
        summary: 'Companion app for Palette hardware',
        img: 'img/paletteapp2.jpg',
        date: '2015',
        dialog: 'projects/paletteapp_dialog.tmpl.html'
      },
      {
        name: 'FastCards',
        summary: 'Android flash card app',
        img: 'img/fastcards_logo.jpg',
        date: '2015',
        dialog: 'projects/fastcards_dialog.tmpl.html'
      },
      {
        name: 'Slate',
        summary: 'A 3D Projection-Mapped Unity Game',
        img: 'img/slate.jpg',
        date: '2014',
        dialog: 'projects/slate_dialog.tmpl.html'
      }
    ];

    $scope.viewProject = function(ev, p){
      var useFullScreen = ($mdMedia('sm') || $mdMedia('xs'))  && $scope.customFullscreen;
      $mdDialog.show({
        controller: DialogController,
        templateUrl: p.dialog,
        parent: angular.element(document.body),
        targetEvent: ev,
        locals: {
          project: p
        },
        clickOutsideToClose:true,
        fullscreen: useFullScreen
      });
      $scope.$watch(function() {
        return $mdMedia('xs');
      }, function(wantsFullScreen) {
        $scope.customFullscreen = (wantsFullScreen === true);
      });
    }

  }]);


  function DialogController($scope, $mdDialog, project) {
    $scope.project = project;
    $scope.cancel = function() {
      $mdDialog.cancel();
    };
  }

  DialogController.$inject = ['$scope', '$mdDialog', 'project'];

  angular.element(document).ready(function() {
    angular.bootstrap(document, ['MainApp']);
  });

})();

(function() {
    'use strict';
    var app = angular.module('MainApp');

    function LinksController($window) {
        this.links = [
            {
                tooltip: 'Resume',
                fa: 'fa-file-text',
                href: '/Matthew_Tsui_Resume.pdf',
                click: null
            },
            {
                tooltip: 'Email',
                fa: 'fa-send',
                href: '',
                click: function(){
                  $window.open("znvygb:znggurj.md.gfhv@tznvy.pbz?fhowrpg=Jrofvgr - Pbagnpg".replace(/[a-zA-Z]/g,function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt(0)+13)?c:c-26);}));
                }
            },
            {
                tooltip: 'Linkedin',
                fa: 'fa-linkedin',
                href: 'https://www.linkedin.com/in/mzqtsui',
                click: null
            },
            {
                tooltip: 'Github',
                fa: 'fa-github',
                href: 'https://github.com/mzqtsui',
                click: null
            },
            {
                tooltip: 'Tumblr',
                fa: 'fa-tumblr',
                href: 'https://mattztsui.tumblr.com',
                click: null
            },
            {
                tooltip: 'Medium',
                fa: 'fa-medium',
                href: 'https://medium.com/@matt.tsui',
                click: null
            }
        ];
    }

    LinksController.$inject = ['$window'];

    app.component('contactLinks', {
        template:`
        <aside id="links">
            <div layout="row" layout-align="center center">
                <md-button ng-repeat="link in $ctrl.links" aria-label="" ng-click="link.click()"  ng-href="{{::link.href}}" target="_blank">
                    <i class="fa" ng-class="link.fa"></i>
                    <md-tooltip>
                        {{::link.tooltip}}
                    </md-tooltip>
                </md-button>
            </div>
        </aside>
        `,
        controller: LinksController
    });
})();
(function() {
    'use strict';
    var app = angular.module('MainApp');

    function ExperienceController() {
        this.workplaces = [
        {
            name: 'Palette',
            role: 'Software Developer',
            date: 'Sep 2015 - Dec 2015',
            location: 'Kitchener, Canada',
            url: 'https://palettegear.com'
        },
        {
            name: 'Imagine Communications',
            role: 'Application Developer',
            date: 'Jan 2015 - Apr 2015',
            location: 'Waterloo, Canada',
            url: 'https://www.imaginecommunications.com'
        },
        {
            name: 'Christie Digital Systems',
            role: 'Unity Developer',
            date: 'Jan 2014 - Apr 2014',
            location: 'Kitchener, Canada',
            url: 'https://www.christiedigital.com'
        },
        {
            name: 'MyPlanet',
            role: 'Fellow',
            date: 'Jan 2014 - Mar 2014',
            location: 'Toronto, Canada',
            url: 'https://www.myplanet.com'
        },
        {
            name: 'BMO InvestorLine',
            role: 'eBusiness Specialist',
            date: 'Jan 2013 - Apr 2013',
            location: 'Toronto, Canada',
            url: 'https://www.bmo.com/self-directed'
        },
        {
            name: 'Infoskill Intelligent Solutions Inc.',
            role: 'Wordpress Developer',
            date: 'May 2012 - August 2012',
            location: 'Toronto, Canada',
            url: 'https://infoskill.com'
        }
        ];
    }


    app.component('workExperience', {
        template:`
        <section>
            <h2>Work Experience</h2>
            <div flex="60" flex-offset="20" flex-xs="100" flex-offset-xs="0"  class="md-padding" layout="column" layout-align="center center">
                <md-list flex>
                    <md-list-item class="md-3-line" ng-repeat="place in $ctrl.workplaces">
                        <div class="md-list-item-text" layout="column">
                            <h3>{{ place.role }} <data class="right location">{{ place.location }}</data></h3>
                            <h4><a ng-href="{{ place.url }}" target="_blank">{{ place.name }}</a></h4>
                            <p>{{ place.date }}</p>
                        </div>
                    </md-list-item>
                </md-list>
            </div>
        </section>
        `,
        controller: ExperienceController
    });

})();
(function() {
    'use strict';
    var app = angular.module('MainApp');

    function EducationController() {
        this.education = [
        {
          name: "Front End Developer Nanodegree",
          sub: "",
          school: "Udacity",
          date: "2016",
          location: "Online"
        },
        {
          name: "Intro to the Design of Everyday Things",
          sub: "",
          school: "Udacity",
          date: "2016",
          location: "Online"
        },
        {
          name: "Bachelor of Computer Science",
          sub: "Software Engineering",
          school: "University of Waterloo",
          date: "2011 - 2016",
          location: "Canada"
        },
        {
          name: "Bachelor of Business Administration",
          sub: "Marketing",
          school: "Laziridis School of Business",
          date: "2011 - 2016",
          location: "Canada"
        }];
    }


    app.component('education', {
        template:`
            <section>
                <h2>Education</h2>
                <div flex="60" flex-offset="20" flex-xs="100" flex-offset-xs="0"  class="md-padding" layout="column" layout-align="center center">
                    <md-list flex>
                        <md-list-item class="md-3-line" ng-repeat="item in $ctrl.education">
                            <div class="md-list-item-text" layout="column">
                                <h3>{{ item.name }}<data class="right location">{{ item.location }}</data></h3>
                                <h4>{{ item.sub }}</h4>
                                <p>{{ item.school }}, {{ item.date }}</p>
                            </div>
                        </md-list-item>
                    </md-list>
                </div>
            </section>
        `,
        controller: EducationController
    });

})();